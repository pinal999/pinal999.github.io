sendMessage(msg_id, with_webview) {
    if (!DemoApp.initDataUnsafe.query_id) {
        alert('WebViewQueryId not defined');
        return;
    }

    document.querySelectorAll('button').forEach((btn) => btn.disabled = true);

    const btn = document.querySelector('#btn_status');
    btn.textContent = 'Sending...';

    const message = {
        chat_id: DemoApp.initDataUnsafe.user_id, // Replace with the actual chat_id or user_id
        text: 'Hello, World!' // Replace with the actual message
    };

    fetch('/send-message', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(message),
    })
    .then(response => response.json())
    .then(data => {
        document.querySelectorAll('button').forEach((btn) => btn.disabled = false);

        if (data.ok) {
            btn.textContent = 'Message sent successfully!';
            btn.className = 'ok';
            btn.style.display = 'block';
        } else {
            btn.textContent = data.description;
            btn.className = 'err';
            btn.style.display = 'block';
            alert(data.description);
        }
    })
    .catch(error => {
        document.querySelectorAll('button').forEach((btn) => btn.disabled = false);
        btn.textContent = 'Unknown error';
        btn.className = 'err';
        btn.style.display = 'block';
        alert('Unknown error');
    });
}
